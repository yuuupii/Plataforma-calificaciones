<!DOCTYPE html>
<html lang="es">
  <style>
    @media screen and (max-width: 767px) {
      .card {
        box-shadow: none !important;
        border: none !important;
        background-color: transparent !important;
      }

      .card-header,
      .card-footer {
        background-color: transparent !important;
        border: none !important;
        text-align: center;
        padding: 0.5rem;
      }

      .card-header h4 {
        font-size: 1.3rem;
        color: #333;
        margin: 0.5rem 0;
      }

      .card-body {
        padding: 0 !important;
      }

      .form-group {
        margin-bottom: 1rem;
      }

      .form-control {
        font-size: 0.95rem;
      }

      .btn-block {
        font-size: 0.95rem;
        padding: 10px;
        width: 100%;
      }

      /* üîß Tablas en m√≥viles */
      table {
        font-size: 0.9rem;
      }

      .table-bordered {
        border: none;
      }

      .table th,
      .table td {
        border: none;
        padding: 0.6rem 0.4rem;
      }

      .table thead {
        background-color: transparent !important;
      }

      .table-hover tbody tr:hover {
        background-color: #f1f1f1;
      }

      .btn-sm {
        font-size: 0.85rem;
        padding: 6px 10px;
      }
    }
  </style>
<head>
  <meta charset="UTF-8">
  <title>Registro de Usuarios</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/parametros.css') }}">
</head>
<body>
<div class="container mt-5">
  <div class="card">
    <div class="card-header bg-info text-white text-center">
      <h4>Registrar Nuevo Usuario</h4>
    </div>
    <div class="card-body">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          <div class="alert alert-warning text-center">{{ messages[0] }}</div>
        {% endif %}
      {% endwith %}

      <form method="POST">
        <div class="form-group">
          <label for="tipo">Tipo de usuario:</label>
          <select id="tipo" name="tipo" class="form-control" required>
            <option value="" disabled selected>Selecciona tipo</option>
            <option value="docente">Docente</option>
            <option value="administrativo">Administrativo</option>
          </select>
        </div>

        <div class="form-group">
          <label for="usuario">Nombre de usuario:</label>
          <input type="text" id="usuario" name="usuario" class="form-control" required>
        </div>

        <div class="form-group">
          <label for="contrasena">Contrase√±a:</label>
          <input type="password" id="contrasena" name="contrasena" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-info btn-block">Registrar Usuario</button>
      </form>
    </div>

    <div class="card-footer text-center">
      <a href="{{ url_for('menu_admin') }}">üîô Volver al panel de control</a>
    </div>
  </div>

  <div class="mt-4">
<h5 class="text-success">Docentes registrados</h5>
<table class="table table-sm table-bordered table-hover">
  <thead class="thead-light">
    <tr>
      <th>ID</th>
      <th>Usuario</th>
      <th>Contrase√±a</th>
      <th>Eliminar-actualizar contrase√±a</th>
    </tr>
  </thead>
  <tbody>
    {% for d in docentes %}
    <tr>
      <td>{{ d.id }}</td>
      <td>{{ d.usuario }}</td>
      <td>
        <span id="clave-docente-{{ d.id }}">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
        <button type="button" class="btn btn-sm btn-link"
                onclick="toggleClave(this, 'clave-docente-{{ d.id }}', '{{ d.contrasena }}')">
            <span>üîì</span>
        </button>
      </td>
      <td>
        <a href="{{ url_for('eliminar_usuario', tipo='docente', user_id=d.id) }}"
           class="btn btn-sm btn-danger"
           onclick="return confirm('¬øEliminar este docente?')">‚ùå</a>
           <a href="{{ url_for('actualizar_contrasena', tipo='docente', user_id=d.id) }}"
            class="btn btn-sm btn-warning">üîß</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
    <h5 class="text-info">Administrativos registrados</h5>
<table class="table table-sm table-bordered table-hover">
  <thead class="thead-light">
    <tr>
      <th>ID</th>
      <th>Usuario</th>
      <th>Contrase√±a</th>
      <th>Eliminar-actualizar contrase√±a</th>
    </tr>
  </thead>
  <tbody>
    {% for a in administrativos %}
    <tr>
      <td>{{ a.id }}</td>
      <td>{{ a.usuario }}</td>
      <td>
        <span id="clave-admin-{{ a.id }}">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</span>
        <button type="button" class="btn btn-sm btn-link"
                onclick="toggleClave(this, 'clave-admin-{{ a.id }}', '{{ a.contrasena }}')">
            <span>üîì</span>
        </button>
      </td>
      <td>
        <a href="{{ url_for('eliminar_usuario', tipo='administrativo', user_id=a.id) }}"
           class="btn btn-sm btn-danger"
           onclick="return confirm('¬øEliminar este administrativo?')">‚ùå</a>
           <a href="{{ url_for('actualizar_contrasena', tipo='administrativo', user_id=a.id) }}"
            class="btn btn-sm btn-warning">üîß</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
  </div>
</div>
<script>
function toggleClave(button, spanId, textoPlano) {
  const campo = document.getElementById(spanId);
  const icono = button.querySelector('span');

  if (campo.textContent === '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢') {
    campo.textContent = textoPlano;
    icono.textContent = 'üîí';
  } else {
    campo.textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
    icono.textContent = 'üîì';
  }
}
</script>
</body>
</html>